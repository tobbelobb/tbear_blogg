<?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet type="text/xsl" href="blogtemplate.xsl"?>
<posts year="2021">
  <post id="hangprinter_project_74" heading="Snaily Snails Fighting Line Wear" date="9-9-2021">
    <p>
      The HP4 has been done ca 75 hours of printing now and shown great promise!
      I shouldn't be surprised that it's working well, given the insane amount of
      work hours that I've put in, but I am.
    </p>
    <p>
      However, there's one thing that bothers be a bit.
      The lines already show slight signs of wear.
      I want to run HP4 unattended for thousands of hours.
      So I need to stop any fraying.
    </p>
    <figure>
      <a href="./bilder/frayed_D_lines.JPG">
        <img src="./bilder/frayed_D_lines_liten.JPG" alt="frayed D-lines" width="500" height="281"/>
      </a>
      <figcaption>These D-lines are ever so slightly frayed.</figcaption>
    </figure>
    <figure>
      <a href="./bilder/frayed_B_lines3.JPG">
        <img src="./bilder/frayed_B_lines3_liten.JPG" alt="frayed B-lines" width="500" height="424"/>
      </a>
      <figcaption>As is this B-line. The image is heavily edited to highlight the frays.</figcaption>
    </figure>
    <h3>Experiments</h3>
    <p>
      I first tried filing down the surfaces of the bearings of the most frayed lines,
      to see if the rate of fraying slowed down.
    </p>
    <figure>
      <a href="./bilder/small_snails.JPG">
        <img src="./bilder/small_snails_liten.JPG" alt="small line roller anchors" width="500" height="335"/>
      </a>
      <figcaption>The left one of these two bearings is was sanded down, for a smoother and rounder surface, but its line kept fraying.
    Interestingly, the bearing on the right, where some colourant from the line had filled up "gaps" in the 3d printed surface of the bearing, like grease,
    did not fray the line nearly as much.</figcaption>
    </figure>
    <p>
      The result above called for experiments with line lubrication.
      So I tested to rub one line with stearin, just from a room tempered chunk.
      It seems to have stopped the fraying from gettning worse from what I can see.
      I've also greased up one of the lines with some "multi grease" that I had lying around.
      That also seems to have mitigated the issue.
    </p>
    <figure>
      <a href="./bilder/stearin_and_multi_grease.JPG">
        <img src="./bilder/stearin_and_multi_grease_liten.JPG" alt="stearin and multi grease" width="500" height="304"/>
      </a>
      <figcaption>Rubbing in lines with stearin and multi grease can reduce line fraying.</figcaption>
    </figure>
    <p>
      But even if my unstructured experiments with stearin and grease might have worked out,
      I don't particularly like having to lubricate my lines.
    </p>
    <p>
      From the results above, I don't know for sure if it is the bearing surface, the sharp bearing radius, or maybe the white ceramic eyelet that
      causes the line to fray. But I'm making some guesses.
    </p>
    <p>
      Since my sanding of bearing surfaces didn't immediately reduce the fraying by a lot, I'll let that potential cause rest for now.
    </p>
    <p>
      I know that the previous Hangprinter v4 prototype also had fraying issues, but it didn't use eyelets at all.
      It frayed due to shear forces between lines and angled entrances to the vgroove bearings.
      That's why the new prototype has tilted bearings, so the line always can enter them in a straight line.
    </p>
    <p>
      So the ceramic eyelets, even if they might still contribute to the problem, can't be the sole source of fraying.
      And shear forces are already mostly dealt with.
    </p>
    <p>
      Based on those preferences, experiences, and hopes, it is clearly time to test if bigger bearing sizes could be helpful.
      Meet the "Snaily Snail" line roller anchor, with a 608 skate bearing in it:
    </p>
    <figure>
      <a href="./bilder/snaily_snail.JPG">
        <img src="./bilder/snaily_snail_liten.JPG" alt="The Snaily Snail line roller anchor" width="500" height="299"/>
      </a>
      <figcaption>The Snaily Snail is identical to the previous line roller anchor, except that it uses a larger bearing,
        and its bearing surface is shallowly U-shaped instead of the more aggressive V-shape of its predecessor (show on the left here).</figcaption>
    </figure>
    <figure>
      <a href="./bilder/snaily_snail2.JPG">
        <img src="./bilder/snaily_snail2_liten.JPG" alt="The Snaily Snail line roller anchor pic nr 2" width="500" height="304"/>
      </a>
      <figcaption>The Snaily Snail is entirely printed by the HP4 itself, making it the first self-printed improvement (attempt)
        that has been put into production on a Hangprinter.</figcaption>
    </figure>
    <p>
      Only time will tell if snails can eliminate the need for lubrication.
    </p>
    <h3>What Has Been Done and What Has Not Been Done</h3>
    <p>
      All other cable driven robots I've seen out there have bearings that rotate freely around an axis.
      Only Hangprinter has insisted on stationary snails.
    </p>
    <figure>
      <a href="./bilder/rotating_block.jpeg">
        <img src="./bilder/rotating_block.jpeg" alt="Standard industrial rotating block" width="500" height="304"/>
      </a>
      <figcaption>Standard industrial rotating block.</figcaption>
    </figure>
    <figure>
      <a href="./bilder/rotating_block_experiment.png">
        <img src="./bilder/rotating_block_experiment.png" alt="Experiment with rotating line roller anchor" width="500" height="304"/>
      </a>
      <figcaption>An old OpenScad experiment where I designed something similar to a standard industrial rotating block
        for Hangprinter. It was never tested in practice because it was both complicated, and at the same time
        needed to become even more complicated for it to rotate correctly.</figcaption>
    </figure>
    <p>
      The reason for this is that the line coming from the ceiling comes at a constant angle into the
      snail.
      If the bearing rotated freely, it would not point directly towards the effector, it would point
      halfway between the effector and the ceiling unit.
      Except, there exist at least two tricks one could use to design around that problem.
    </p>
    <h4>Trick 1</h4>
    <p>
      We could let the line from the ceiling enter the "snail" in a particular way,
      so that all forces from that entrance goes through the desired axis of rotation:
    </p>
    <figure>
      <a href="./bilder/Momentum.png">
        <img src="./bilder/Momentum_liten.png" alt="Sketch explaining momentum in snail" width="500" height="378"/>
      </a>
      <figcaption>Forces acting on the line roller anchor we used last year.
        The trick is to reduce the black line labeled "Distance = d" to a length of zero,
        so the ceiling bound line doesn't create any rotational momentum on the snail.
        So the whole block would rotate around the cross, and the ceiling bound line would enter
        the snail via a freely rotating bearing that always points towards the ceiling,
        and lines up with the cross.</figcaption>
    </figure>
    <h4>Trick 2</h4>
    <p>
      If the snail's bearing had two axes to rotate around, then any entrance direction could be matched up with any
      exit direction of the line, without any shear forces on the line.
    </p>
    <figure>
      <a href="./bilder/rotating_rotating_block.png">
        <img src="./bilder/rotating_rotating_block.png" alt="Standard industrial rotating rotating block" width="500" height="378"/>
      </a>
      <figcaption>Standard industrial rotating block with added rotational axis.</figcaption>
    </figure>
    <p>
      Both of these tricks seem ok-ish as solutions to the fraying problem.
      They're both not the most complicated mechanics in the world, but they add a significant amount of moving parts.
      There are six of these snails in every Hangprinter.
      If we cound the line guides on the ceiling unit as well, since they do a similar job, there are 18.
    </p>
    <p>
      Good bearings are expensive, and each will fail after X hours.
      Before failing, they will start asking for lubrication, with squeeking and rattling sounds.
      Not the end of the world, but we're trying to reduce price and maintenance burdens here.
    </p>
    <p>
      The thought of implementing those tricks make my thoughts wander back to the good old days
      on barely working but extremely simple Hangprinters.
    </p>
    <h3>Hangprinter's Snail History</h3>
    <figure>
      <a href="./bilder/length_control_screw.JPG">
        <img src="./bilder/length_control_screw_liten.JPG" alt="Length control screw" width="500" height="375"/>
      </a>
      <figcaption>2015: First ever Hangprinter ABC anchor. This worked, but the printed part was unnecessary. It didn't allow doubling the lines, and
        it didn't allow tightening the lines individually.
        Other than that, this solution was fantastic and unproblematic.
        Lines were carried on the effector itself, so there was no entry from the ceiling unit.
    </figcaption>
    </figure>
    <figure>
      <a href="./bilder/frame_blocks.JPG">
        <img src="./bilder/frame_blocks_liten.JPG" alt="A solution called frame blocks" width="500" height="375"/>
      </a>
      <figcaption>Also 2015: First experiment with doubling the lines. Bearings jumping up and down became a problem.</figcaption>
    </figure>
    <figure>
      <a href="./bilder/Babylon5_zoomed.jpeg">
        <img src="./bilder/Babylon5_zoomed_liten.jpeg" alt="Babel tower print anchors" width="500" height="337"/>
      </a>
      <figcaption>2017: The Babel Tower was printed with single ABC lines, coupled together via lamp hooks, drilled into the wall.
        Lamp hooks were also used for the vertical lines.
        Lamp hooks worked surprisingly well with the 0.35 mm thick FireLine. All lamp hooks didn't have the same good
        surface finish though, and at least one Hangprinter v2 crashed into the floor because a D line had been frayed and snapped.
        That's how D lines got bearings first.
    </figcaption>
    </figure>
    <figure>
      <a href="./bilder/Simple_Anchor.JPG">
        <img src="./bilder/Simple_Anchor_liten.JPG" alt="Simple anchor of early HP3" width="500" height="333"/>
      </a>
      <figcaption>Also 2017: Early versions of Hangprinter version 3 still used lamp hooks for ABC anchors.
        Given the D-line accidents we had seen though, we knew that we would have to let simplicity fly, and and make
        line guiding bearings part of our
        Hangprinter lives.
    </figcaption>
    </figure>
    <figure>
      <a href="./bilder/ABC_anchor_footprint.JPG">
        <img src="./bilder/ABC_anchor_footprint_liten.JPG" alt="Simple anchor of early HP3" width="500" height="333"/>
      </a>
      <figcaption>Also 2017: The first snails used U-shaped bearings with 4 mm bores, and PTFE tubes as eyelets.
        We were halfway into sin with this one, and it had many problems. Lines fell off the bearing, the whole thing wiggled side to side,
        and the PTFE tube wore down quickly.
    </figcaption>
    </figure>
    <figure>
      <a href="./bilder/new_line_rollers.JPG">
        <img src="./bilder/new_line_rollers_liten.JPG" alt="Early HP4 line roller anchor" width="500" height="334"/>
      </a>
      <figcaption>2018: A late HP3 lineroller to the right. Lines still fell off the bearing, but it wiggled less, could double the line,
        and had no PTFE tube that could wear down. Unfortunately, the slimmer vgroove bearings increased shear forces on the line.
        It was also easily broken if someone stepped on it by accident.
        The early HP4 lineroller to the left only solved one of those problems. It was more sturdy, but it ate through FireLine
        in only a few hundred hours.
    </figcaption>
    </figure>
    <h3>Hangprinter's Snaily Snail Slow Design Development in General</h3>
    <p>
      We're moving towards what other cable driven robots have been doing since forever, right?
      Why do we do it so slowly?
    </p>
    <p>
      Hangprinter is searching the design space at the cheaper end of cable driven robotics.
      None of the other cable driven robots have become wide spread either, so we
      can't copy/paste or do "the obvious" while we're searching for new obviouses.
    </p>
    <p>
      There must be some deliberate searching on our end if we're to reach our goals.
      I wish we could search a bit faster though, but alas.
    </p>
  </post>
  <post id="hangprinter_project_73" heading="Works" date="5-9-2021">
    <p>
      Hangprinter version 4 works now.
      It is the default Hangprinter design in the repo.
      It has some documentation, and it has some builders.
      It prints decent quality things, like this:
    </p>
    <figure>
      <a href="./bilder/foodwastebagholder.jpeg">
        <img src="./bilder/foodwastebagholder_liten.jpeg" alt="food waste bag holder Hangprinted" width="500" height="281"/>
      </a>
      <figcaption>A holder for paper bags.</figcaption>
    </figure>
    <p>
      ... and this:
    </p>
    <figure>
      <a href="./bilder/selfreplicatedspool.jpeg">
        <img src="./bilder/selfreplicatedspool_liten.jpeg" alt="self-replicated spool Hangprinted" width="500" height="281"/>
      </a>
      <figcaption>A self-replicated spool for HP4.</figcaption>
    </figure>
    <p>
      ... and this:
    </p>
    <figure>
      <a href="./bilder/WhiteBenchy.png">
        <img src="./bilder/WhiteBenchy_liten.png" alt="White Benchy" width="500" height="281"/>
      </a>
      <figcaption>A white Benchy printed by HP4 while tuning firmware and slicer configs.</figcaption>
    </figure>
  </post>
  <post id="hangprinter_project_72" heading="Hangprinter v4" date="9-7-2021">
    <figure>
      <a href="./bilder/DSC_1065.JPG">
        <img src="./bilder/DSC_1065_liten.JPG" alt="HP4" width="500" height="281"/>
      </a>
      <figcaption>The HP4 Prototype 2</figcaption>
    </figure>
    <figure>
      <a href="./bilder/DSC_1066.JPG">
        <img src="./bilder/DSC_1066_liten.JPG" alt="HP4" width="500" height="281"/>
      </a>
      <figcaption>HP4 again.</figcaption>
    </figure>
    <figure>
      <a href="./bilder/DSC_1067.JPG">
        <img src="./bilder/DSC_1067_liten.JPG" alt="HP4" width="500" height="281"/>
      </a>
      <figcaption>Another image of HP4.</figcaption>
    </figure>
  </post>
  <post id="personal_2" heading="Philosophy of Hangprinter" date="24-6-2021">
    <h3>The Software</h3>
    <p>
      People hate Software.<br />
      Bugs, leaks, errors.<br />
      Cryptic messages.<br />
      Work-arounds.<br />
      Menus, forms, and help-pages.<br />
    </p>
    <p>
      Software says "Ok, doing it".<br />
      And you wait, you don't know how long.<br />
      You don't know what it's doing.<br />
      You <i>need</i> it to work.<br />
      It sometimes fails. After a while.<br />
    </p>
    <p>
      Like the most under-funded government agency imaginable.<br />
      Broken windows, rotten apples, full trashcans everywhere.<br />
      People defend themselves.<br />
      Against software.<br />
    </p>
    <h3>The Plastic</h3>
    <p>
      People hate plastic.<br />
      Weak, cheap, poison.<br />
      Awful smell, cracking sounds, hysterical colors.<br />
      Short use.<br />
      Long trash.<br />
      Buries us, in lifeless artificiality.<br />
    </p>
    <p>
      Whatever disease you get,<br />
      there's always a chance<br />
      that plastic,<br />
      disturbing your hormones<br />
      triggered it.<br />
    </p>
    <p>
      That's what people feel.<br />
      Plastic comes from an unknown place, underground.<br />
      Plastic poison can penetrate your skin.<br />
      Get into your body.<br />
      Like the devil.<br />
    </p>
    <p>
      All other materials are natural.<br />
      Only plastic is not.<br />
      People defend themselves.<br />
      Against plastic.<br />
    </p>
    <h3>The Robots</h3>
    <p>
      People abhor most robots.<br />
      Plastic and software with motors.<br />
      Commanded by others.<br />
      In our surroundings.<br />
    </p>
    <p>
      The few robots that people love,<br />
      are exactly those<br />
      that they control,<br />
      themselves.<br />
    </p>
    <p>
      Other robots steal.<br />
      Grab attention.<br />
      Grab pictures, writings, and videos.<br />
      Robots intrude.<br />
      Take jobs.<br />
      Take lives.<br />
    </p>
    <p>
      Robots make money.<br />
      For the already rich.<br />
    </p>
    <p>
      Robots are<br />
      the ultimate source<br />
      of faceless power.<br />
    </p>
    <h3>The Future</h3>
    <p>
      A single person<br />
      with superior robots<br />
      could subjugate all other humans.<br />
      All you need is scale.<br />
      This risk was not in the past,<br />
      but is in the future.<br />
    </p>
    <p>
      A group of countries<br />
      or companies<br />
      or countries and companies<br />
      with superior robots<br />
      own the world.<br />
      That's the present.<br />
    </p>
    <p>
      People must defend themselves.<br />
      Against robots.<br />
      And the only way<br />
      is with robots.<br />
    </p>
    <p>
      The power over yourself,<br />
      can stay yours in two ways:<br />
      through kindness of others,<br />
      who have robots,<br />
    </p>
    <p>
      Or you can have robots yourself.<br />
    </p>
    <p>
      People who hate software<br />
      who hate plastic<br />
      who have little money<br />
      will stumble into non-ownership of robots.<br />
      Through defending themselves<br />
      against software and plastic.<br />
    </p>
    <p>
      They must be given ownership,<br />
      or they will be owned.<br />
      Or worse:<br />
      Irrelevant.<br />
    </p>
    <p>
      They need free robots.<br />
      They need to be handed their free robots.<br />
      For free.<br />
      Extremely friendly robots.<br />
      Easy robots.<br />
      Entirely under their command robots.<br />
      But strong and valuable robots.<br />
    </p>
    <p>
      Robots that they will accept.<br />
      Robots that will eventually defend <i>them</i>.<br />
    </p>
    <p>
      But people hate robots.<br />
      And receive robots with stiff smiles.<br />
      Least wanted pair of socks, on Christmas Day.<br />
      Hangprinter is me, knitting socks.<br />
    </p>
    <p>
      I hate software and plastic.
      But I need Robots.
      And also you.
    </p>
    <p>
      Just my kindness,<br />
      will not be enough to cover all,<br />
      when robots of power march in.<br />
    </p>
    <p>
      They will call it,<br />
      "economic realities",<br />
      and do what they want.<br />
      They will harm you only by accident.<br />
      Because they won't notice you at all.<br />
    </p>
    <p>
      But if you have robots.<br />
      A few for yourselves,<br />
      that you love.<br />
      Then you can step aside.<br />
      Not care about those in power.<br />
      And be free.<br />
    </p>
  </post>
  <post id="hangprinter_project_71" heading="TorbjÃ¸rn Must Test New Things. hp-mark Is Good Enough." date="13-4-2021">
    <p>
      I saw this
      <a href="https://www.youtube.com/watch?v=5EuWCFCgy58">talk</a>
      about one of my favourite artist's creative process.
      Here are a few quotes from it that I've resoned around the last few days:
    </p>
    <p>
      1: <i>"Publishing is not finishing. All the emotions are different. [...] Publishing is deciding to stop when you want to keep working. And it's super painful."</i>
    </p>
    <p>
      2: <i>"Publishing works best if you think of it as a style of working. It's an attitude that persists throughout the entire creative process.
        Working to publish is about getting shit done. Your whole mentality shifts when you're working to publish. You focus on the stuff that matters,
        and you ignore the stuff that doesn't."</i>
    </p>
    <p>
      3: <i>"Working to publish, it's selfless, it's outward focused, it's about results, and giving back, and contributing to the world."</i>
    </p>
    <p>
      His shortest version of the good work to publish method is this:
    </p>
    <p>
      4: <i>"... doing only what matters, the whole time, and then stopping."</i>
    </p>
    <p>
      He explains that this is a great strategy because most ideas and attempts flop, and you don't know which will succeed beforehand.
    </p>
    <p>
      5: <i>"You can't choose what you're famous for. ... I can't make a song a hit.
        I can't control how my songs are pushed through the world and are experienced by others.
        What I can do is be prolific, I can be creative, I can make great stuff.
        What I can do is work to publish.
        You write the next scene, you record the next instrument, you build the next set, you shoot the next tape, you design the next synth,
        and I can </i>[publish all that]<i> and then I can move on, and I can go to sleep at night, knowing that I did everything I could."</i>
    </p>
    <p>
      I want to see if this musician's points can help me think better about where to take hp-mark and Hangprinter from here.
      His work is different from my work, but we're also similar.
      Let's see if we can make our experiences fit.
    </p>
    <h3>1: Publishing Is Not Finishing</h3>
    <p>
      Things are never finished, we have that in common.
      I like his emotion focused description.
    </p>
    <p>
      With where I'm at with hp-mark right now, I don't want to keep working.
      So we're not exactly at the same spot, the musician and I.
      That's because hp-mark is not like a song. It's more like an instrument.
    </p>
    <p>
      Since even before starting to build hp-mark, I've thought of it as lifting Open Source Hardware over a threshold,
      closing the loop, ending the guessing game in open source hardware positioning.
      A short-term grind, a long-term investment for the common good.
    </p>
    <p>
      Proprietary machines have had motion tracking for decades.
      Everyone knows an OSHW motion tracker could be made.
      It just requires someone's work hours.
      That might as well be me, I thought.
      But it's not very fun, no, and I knew that.
      It's painful to continue.
      It will be delightful to stop.
    </p>
    <p>
      My hp-mark process changes after this month's demo, because hp-mark is good enough.
      I have improved both code and hardware a lot, and tested it thoroughly over the last month.
      It can take OSHW over the threshold just fine, if it reaches widely.
    </p>
    <figure>
      <a href="./bilder/Done_apr_2.JPG">
        <img src="./bilder/Done_apr_2.JPG" alt="Done March/April 2021" width="500" height="281"/>
      </a>
      <figcaption>Tasks completed during this sprint.</figcaption>
    </figure>
    <h3>2: Working to Publish</h3>
    <p>
      The musician and I have different outputs and different metrics.
      For music, success is to reach people.
      hp-mark needs to
      <ul><li>reach people, and to</li><li>work well enough for them,</li></ul>to be successful.
      My pain comes from ignoring/failing at the former while working to my bones on the latter.
    </p>
    <p>
      But the musician's point makes a lot of sense for hp-mark in the continuation.
      Just make a small thing and see if it flies.
      See if you can have a little success, quickly.
      I will get back to that way of working.
    </p>
    <p>
      Make something small work well enough, then try to reach people.
      Make something else work then try to reach people again.
      And again and again and so on.
    </p>
    <p>
      I regret not pasting a giant Aruco marker on the Hangprinter back in November 2020.
      I could also have dropped the spherical markers in December, when I found they were hard to make/source.
      And the colored markers stayed with me for too long also.
      I would have reached more collaborators and supporters by doing something simple,
      and then spent time reaching out instead.
      Imperfect decisions there. Well, well.
    </p>
    <h3>3 and 4 are Mostly the Same</h3>
    <p>
      I think quotes 3 and 4 mostly come down to the
      same improvement of process for hp-mark as quote 2 did:
      <ol>
        <li>Make a small thing.</li>
        <li>See if it flies.</li>
      </ol>
    </p>
    <h3>5: Torbjorn Tests New Things</h3>
    <p>
      I interpret quote 5 as "test new things, test different things, do the next thing".
      The last couple of Hangprinter years have felt a bit stagnant.
      Particularly on the outreach side of things. Why?
    </p>
    <p>
      Many worthwhile Hangprinter related projects are hard and time consuming.
      Robustness is not quick, easy, cheap, or sensational.
      We need robustness.
      So I had to dive into "doing it right", and swam across the swamp.
    </p>
    <p>
      Still, I should have done it more
      quick, easy, cheap, and sensational than I did.
    </p>
    <p>
      There's always a light version of any project, one that breaks you down less.
      I must break down less. Economically and motivationally.
    </p>
    <p>
      Quick things to try:
      <ul>
        <li>Hangprinter with a very heavy effector</li>
        <li>Hangprinter with big heat bed</li>
        <li>Hangprinter with capable clay extruder</li>
        <li>Hangprinter with two tool heads mounted</li>
        <li>Hangprinter with as simple as possible tool changer</li>
        <li>hp-mark with a GIANT marker</li>
        <li>Outdoor Hangprinting</li>
        <li>Collaboration with 3d-printing artists</li>
        <li>Scripting auto calibration (easy now, after 7 months of grind :-P)</li>
        <li>Load cells along lines</li>
        <li>Store bought pellet extruder</li>
      </ul>
      Things that I don't yet know how to fit into the quick publish and outreach success template:
      <ul>
        <li>RepRapFirmware upgrade</li>
        <li>Electronics (Duet Wifi to Duet 3) upgrade</li>
        <li>Even more hp-mark precision and accuracy</li>
        <li>Hangprinter v4 official release with documentation</li>
        <li>More closed line guides, smaller bearings</li>
      </ul>

    </p>

  </post>
  <post id="hangprinter_project_70" heading="hp-mark Is Good But Lonely" date="27-3-2021">
    <p>
      The rabbit hole has gotten deeper.
      But progress is fast at this stage.
      Average error (that's accuracy) has shrunk from ca 35 mm to ca 3.5 mm.
      Maybe even smaller.
      I haven't tested accuracy thoroughly yet.
    </p>
    <p>
      Precision (that's stability of repeated measurements) at the origin is down from ca 5 mm to ca 1 mm.
      And also:
    </p>
    <p>
      CHECK!<input type="checkbox" checked="checked" disabled="disabled">Detect all markers on 95% of training images<br /></input>
    </p>
    <p>
      The markers have changed from small colored spheres to bigger retro-reflective disks.
      They're cheaper, lighter, easier to manufacture, and perform much, much better.
    </p>
    <p>
      I had to go and implement the disk geometric equations.
      My body protested for days when I picked up that task.
      Luckily, this time I had a
      <a href="https://link.springer.com/content/pdf/10.1007/978-3-540-24672-5_41.pdf">research paper</a>
      to guide me through most of the theory,
      and I could quickly replicate my old test structure.
      This made me ca 10x faster compared to when I did the sphere geometry.
    </p>
    <p>
      I've posted a couple of demos since last time:
    </p>
    <figure>
      <div class='embed-container'>
        <iframe src='https://www.youtube.com/embed/m9qjuZQowCE'
          frameborder='0'
          allowfullscreen='true'>
        </iframe>
      </div>
    </figure>
    <figure>
      <div class='embed-container'>
        <iframe src='https://www.youtube.com/embed/yRF-zevGHlQ'
          frameborder='0'
          allowfullscreen='true'>
        </iframe>
      </div>
    </figure>
    <p>
      The first video shows the more fundamental use case for hp-mark: auto/assisted anchor calibration.
      It enables all other hp-mark use cases, including homing.
    </p>
    <p>
      So hp-mark is growing up.
    </p>
    <p>
      The extremely high recognition and identification rate I have now is thanks to some LEDs
      that I put around the camera:
    </p>
    <figure>
      <a href="./bilder/POWERFUL.jpeg">
        <img src="./bilder/POWERFUL_liten.jpeg" alt="My Picam with led rings around it" width="500" height="253"/>
      </a>
      <figcaption>My picam v2 with two rings of in total 20 LEDs around it.
        This removes most problems I had with shadows disturbing measurements.
        I'd say it took identification rate from ca 95% to ca 99%(?).
        Out of ca 1000 test images, I haven't recorded a single identification failure yet.
      </figcaption>
    </figure>
    <p>
      I know I could enhance accuracy and precision further by mounting these slightly higher end, low distortion lenses:
    </p>
    <figure>
      <a href="./bilder/low_distortion_lenses.jpeg">
        <img src="./bilder/low_distortion_lenses_liten.jpeg" alt="A set of low distortion lenses" width="500" height="281"/>
      </a>
      <figcaption>A set of low distortion lenses that I ordered from Arducam.
        This setup would use the same image sensor, wire connection, and software interface as the current Picam v2.</figcaption>
    </figure>
    <p>
      However, changing the camera PCB and lens means having to calibrate it and also make a new mounting bracket for it.
      Plus all the fiddling with wires, focusing the camera, unexpected stuff etc.
    </p>
    <p>
      My guess is 1-2 days of work.
      Is it worth it? What are my goals?
    </p>
    <h3>Keep Your Head Down And Work!</h3>
    <p>
      This sprint's goal is "high accuracy auto calibration".
      The higher level goal is "a reliable work horse".
      Peace of mind.
    </p>
    <p>
      The better camera achieves all of that.
      So I have to do it.
      Just like I redid the markers.
    </p>
    <p>
      This isn't how I worked a few years back.
      This isn't how the HP1, HP2, HP3, and first prototype of HP4 were made.
      They were all just barely working systems.
      This is why HP4 will be different.
    </p>
    <h3>AAAAAAA!</h3>
    <p>
      Body is shouting loudly.
      And for good reason.
    </p>
    <p>
      Rest of World, aka everyone I meet, care extremely little about hp-mark
      in its current form.
      It you're reading this blog post, you're among very few
      (<a href="https://torbjornludvigsen.goatcounter.com/">source</a>).
    </p>
    <p>
      As much as I crave attention, Rest of World craves brain tickle.
      Humans need this always.
      Brains want to light up.
    </p>
    <p>
      Current form hp-mark just isn't very...
    </p>
    <figure>
      <a href="./bilder/darth_vader_helmet.jpg">
        <img src="./bilder/darth_vader_helmet_liten.jpg" alt="A side shot of Darth Vader's helmet" width="500" height="376"/>
      </a>
      <figcaption>MRI scan of person reading up on how a measurement system that is unrelated to their life improved from 35 to 3.5.</figcaption>
    </figure>
    <p>
      ... stimulating.
      For me, a person who is constantly dying for attention, this is a problem.
    </p>

    <h3>What To Do</h3>
    <p>
      Even at nanometer precision, hp-mark without a context would be nano-stimulating to the non-Hangprinter owning world.
      Common solutions to this kind of problem:
      <ol>
        <li>Pay folks to suffer thruogh your under-stimulating thing. Attention-as-a-service. Day jobs. Ads. This is the most common solution out in the wild.</li>
        <li>Find people who love your stuff by unusual amounts.</li>
        <li>Put your thing into an exciting context/story.</li>
        <li>Pitch! Learn pitching dark arts.</li>
        <li>Accept defeat.</li>
      </ol>
    </p>
    <p>
      All of these have their own pros and cons.
      Too much to write down here.
      I will do number 5 for the rest of this sprint, and then try my luck at number 3.
    </p>
    <figure style="left-margin:auto">
      <a href="./bilder/current_sprint2.JPG">
        <img src="./bilder/current_sprint2_liten.JPG" alt="Tasks of the current sprint" width="338" height="600"/>
      </a>
      <figcaption>The sprint in question.</figcaption>
    </figure>
    <p>
      The first slightly more exciting context, at least for hp-mark, will be HP4.
      End-to-end, released machine, with build manual and all.
      I look forward to that.
    </p>
    <h3>Outlook</h3>
    <p>
      HP4 is not very interesting on its own either though.
      It will need it's own number 3 eventually.
      A context creates a story.
      Without a story, humans can not understand, or hardly even percieve your stuff.
    </p>
    <h3>Number 3 Suggestions for HP4</h3>
    <ul>
      <li>
        Hangprinting a body shaped house that's later sold as an art piece on a blockchain.
      </li>
      <li>
        A variable size telescope rod framed Hangprinter on wheels that collects its own raw material and can flip pancakes.
        Perfect for Burning Man.
      </li>
      <li>
        Using HP4 as a motorized trampoline for cats. Computer vision detects cat. Ejects/bounces cat. Cat happy. The end.
      </li>
      <li>
        A Hangprinter v4 built... inside Minecraft. And then being sold as an NFT on a blockchain. Just add the blockchain to the end of every suggestion from here on.
      </li>
      <li>
        A Hangprinter with AI that registers its own company, and prints and assembles an array of other machines to be its employees.
      </li>
      <li>
        A Hangprinter that just connects deeply with people.
      </li>
      <li>
        Something simpler. A HP that puts cheese on a pizza and the slices it.
      </li>
      <li>
        Hangprinter doing something oddly satesfying, like cutting paper, or 3d printing ceramic poop. With glazing.
      </li>
      <li>
        A Hangprinter hanging down from space.
      </li>
      <li>
        A Hangprinter mounted upside-down. So D-anchor is on floor, ABC-anchors in ceiling, and print surface is in the ceiling.
        Mounted sideways would also work, for hype purposes, but not very well in practice.
      </li>
      <li>
        A big Hangprinter outside using a hundred helium balloons as its D-anchor.
      </li>
      <li>
        A single, fat, vertical, constant speed extrusion. Preferrably made with the HP from space.
      </li>
      <li>
        Printing a complete working bike in one go.
      </li>
      <li>
        A flexible motor driven suspended Hang-printbed. A <a href="https://gitlab.com/tobben/hangbed">hangbed</a>.
      </li>
      <li>
        A HP that's just super huge, with ABC anchors mounted on big trucks, and D on a high crane.
        This is the most frequently encountered one out in the wild, which more or less guarantees that it's a good one.
        The word HUUUUGE by itself already tickles a bit. I'm sure you can feel it.
      </li>
    </ul>
    <h3>Short End Note</h3>
    <p>
      The old HP story is basically "a living thing that creates economic value".
      Fully automated, self-replicating, printing furniture, taking zero space when not in use.
      I'm not sure if that is tickly enough from my attention cravings' perspective.
      Before it's even out there we'll never know.
    </p>
    <p>
      hp-mark does more than just exist now.
      It's getting quite good, but also quite lonely.
    </p>
  </post>

  <post id="hangprinter_project_69" heading="hp-mark Exists Now" date="15-2-2021">
    <p>
      I climbed down a rabbit hole recently.
      Nearly half a year working on hp-mark.
      The past 84 days even skipping blog post and newsletter writing.
    </p>
    <p>
      Progress has been steady.
      It works now.
      <a href="https://gitlab.com/tobben/hp-mark">hp-mark</a> measures positions, like:
    </p>
    <figure>
      <a href="./bilder/result-217_0.png">
        <img src="./bilder/result-217_0_liten.png" alt="First ever non-zero result from hp-mark" width="500" height="376"/>
      </a>
      <figcaption>Result 1: [-1.27, -217.65, 2.68]. Hand measured position is [0, -217, 0].</figcaption>
    </figure>
    <p>
      Accuracy is not fantastic.
      The image above is a lucky one, with only 3 mm of error.
      A more commonly seen error is around 35 mm.
    </p>
    <p>
      A lot of hp-mark work remains.
      I ticked 2 boxes, and added 6 new ones in the
      <a href="https://gitlab.com/tobben/hp-mark/-/blob/master/README.md#status">roadmap</a>
      today:
    </p>
    <p>
      <input type="checkbox" checked="checked" disabled="disabled">Aquire camera 6D pose (this includes defining our world coordinate system)<br /></input>
      <input type="checkbox" checked="checked" disabled="disabled">Aquire effector 6D pose<br /></input>
      <input type="checkbox" disabled="disabled">Detect all markers on 95% of training images<br /></input>
      <input type="checkbox" disabled="disabled">Take image ourselves upon request, don't rely on other programs to take image first<br /></input>
      <input type="checkbox" disabled="disabled">Create a continous stream of position measurements (video?)<br /></input>
      <input type="checkbox" disabled="disabled">Get a statistical idea about size of error<br /></input>
      <input type="checkbox" disabled="disabled">Respond to RepRapFirmware/Duet request for position measurement<br /></input>
      <input type="checkbox" disabled="disabled">Integrate a second camera, to reduce error<br /></input>
    </p>
    <p>
      I'm a bit overwhelmed still.
      I need to look backwards a bit.
    </p>
    <h3>What Have I Done?</h3>
    <p>
      I've been surprised.
    </p>
    <figure>
      <video width="500" height="367" controls="controls">
        <source src="bilder/fun.mp4" type="video/mp4"/>
         <!--source src="movie.ogg" type="video/ogg"-->
         Your browser does not support the video tag.
      </video>
      <figcaption>
        Video stitched together from todays test images.
      </figcaption>
    </figure>
    <!--figure>
      <a href="./bilder/result-217_4.png">
        <img src="./bilder/result-217_4_liten.png" alt="First ever non-zero result from hp-mark" width="500" height="376"/>
      </a>
      <figcaption>Result 3: [0.24, -220.14, 1.99]. Hand measured position is [0, -217, 0].</figcaption>
    </figure -->
    <p>
      I chose C++, OpenCV, and a very traditional approach for this project.
      I just wanted the most basic code that would mecanically find circles among pixels,
      and then apply static geometric equations to transform circles into a nozzle position.
      No AI stuff, no GPU stuff, no fancy hardware control, just
$$
  f(x) \rightarrow y,
$$
     where \(x\) is an image, and \(y\) is a nozzle position.
    </p>
    <p>
      Such an old and explored problem!
      I felt confident.
    </p>
    <p>
      Some things that took long for me to program, in descending order:
      <ul>
        <li><b>Good enough ellipse detection.</b> OpenCV's <code>SimpleBlobDetector</code> was ok, but ultimately not
          robust enough for our purposes. I was lucky to find <a href="https://github.com/CihanTopal/ED_Lib">ED_Lib</a>, and spent a little over a month integrating it into hp-mark.
          For example, I had to fight a little to get sub-pixel accuracy in the center and size data. More about that
          <a href="https://github.com/CihanTopal/ED_Lib/issues/12">here</a>.</li>
        <li><b>Geometry.</b> A photon bounces off a sphere, through a pinhole, and onto an image sensor. Many more follow.
          They create a pattern, a projection, on the image sensor.
          Given the position of the sphere, what's the equation of its projection? Or vice versa; given a projection,
          what's the position of the sphere? Which projected point correspond to the sphere's center? I derived all relevant equations by hand and wrote tests that wouldn't go
          green before I was exactly right.
          To bootstrap the chain of testable geometric functions, I derived the most basic equation in two different
          ways, and tested that the two derived functions gave exactly the same results.
          The system would never be good if the theory it rested upon wasn't sound, so I spent the time to make this
          perfect.</li>
        <li><b>Filtering among ellipses.</b> The improved ellipse detector found <i>lots</i> of ellipses.
          Getting hp-mark to determine which ellipses represent real markers, was hard.
          To  be real useful, hp-mark must be able to identify all its markers almost all the time,
          so I spent extra time here as well. I will return to this point in the future, but we're at least finding
          all the markers ca 80% of the time now.</li>
        <li><b>Color recognition.</b> The human brain is full of heuristics that helps us determine color,
          in a wide variety of situations. Very fine details of camera settings, light/shadow,
          and way of definition, throws a simplistic computer program off very easily.
          The strongest heuristic I was able to program, in which all colors are relative, still can not
          identify a non-marker in a set of six real and one false marker.
          Still, I was able to keep color as a marker categorizer that lets us
          avoid having to put QR-codes on our markers.
          I fought a bit for the aesthetics.
        </li>
      </ul>
    </p>
    <p>
      I feel like I'm almost too tired of it to even write about this stuff now.
      But before I climb out of this rabbit hole,
      I can show you something about how the ellipse detector works internally:
    </p>
    <figure>
      <a href="./bilder/input3.png">
        <img src="./bilder/input3.png" alt="Input to ellipse detector" width="500" height="407"/>
      </a>
      <figcaption>A zoomed in version of the original image from the PiCam v2.</figcaption>
    </figure>
    <figure>
      <a href="./bilder/edgeImage3.png">
        <img src="./bilder/edgeImage3.png" alt="edge image inside ellipse detector" width="500" height="407"/>
      </a>
      <figcaption>Color contrast between pixels were used to find these edges in the image.</figcaption>
    </figure>
    <figure>
      <a href="./bilder/segmentImage3.png">
        <img src="./bilder/segmentImage3.png" alt="segment image inside ellipse detector" width="500" height="407"/>
      </a>
      <figcaption>The edge pixels are the grouped into segments. Each segment has a different color in this visualization.
        A single segment that forms a closed circle or ellipse will be detected already at this stage.
        Most detectors can find complete closed-curve ellipses quickly and easily.
        What sets ED_Lib apart is how hard it tries to piece together the chopped-up circles, and how quick and cheap
        it manages to do this.
      </figcaption>
    </figure>
    <figure>
      <a href="./bilder/lines1Image3.png">
        <img src="./bilder/lines1Image3.png" alt="lines image inside ellipse detector" width="500" height="407"/>
      </a>
      <figcaption>The segments are split up further into lines and arcs. These are the lines.</figcaption>
    </figure>
    <figure>
      <a href="./bilder/edarcs1Image3.png">
        <img src="./bilder/edarcs1Image3.png" alt="arcs image inside ellipse detector" width="500" height="407"/>
      </a>
      <figcaption>... and these are the arcs.
        (If you compare very closely with the segments image, you find that not all arcs match exactly.
        They should match exactly.
        I mixed up images from two different runs when preparing this, so this arc visualization is ever so slightly off.
        It's still representative for the result below though, in that the top blue marker could not be found amog these arcs either, but all other markers were found.)
      </figcaption>
    </figure>
    <figure>
      <a href="./bilder/edCircles3.png">
        <img src="./bilder/edCircles3.png" alt="output of ellipse detector" width="500" height="407"/>
      </a>
      <figcaption>The arcs are combined into circles and ellipses according to many different heuristics.</figcaption>
    </figure>
    <p>
      In the image above, we see that one marker was missed, despise ED_Lib's many different heuristics.
      I tried to tune the heuristics for the hp-mark use case.
      See how that went, <a href="https://github.com/CihanTopal/ED_Lib/issues/13">here</a>.
    </p>
    <p>
      Ultimately failing to tune the heuristics convinced me to put background plates below my markers.
      That is what I'm currently working on.
      They will probably end up looking something like this:
    </p>
    <figure>
      <a href="./bilder/octagon.jpeg">
        <img src="./bilder/octagon_liten.jpeg" alt="marker with bent octagonal background" width="500" height="500"/>
      </a>
      <figcaption>Test of marker background with bent octagonal background.</figcaption>
    </figure>
    <p>
      The final background design will probably be flat and circular, and hp-mark will use the edge of the
      background, as well as the marker itself, to determine its position, further improving both robustness and accuracy of the system.
    </p>
    <p>
      But not today.
      I'm so tired of that kind of programming.
      Let's celebrate the results at the top of this post for a while first.
      And let's rest.
    </p>
  </post>
</posts>
